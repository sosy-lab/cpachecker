# This file is part of CPAchecker,
# a tool for configurable software verification:
# https://cpachecker.sosy-lab.org
#
# SPDX-FileCopyrightText: 2007-2020 Dirk Beyer <https://www.sosy-lab.org>
#
# SPDX-License-Identifier: Apache-2.0

# ----------------------------------------------------------------------
# This configuration file uses the TestCaseGeneratorAlgorithm.
# ----------------------------------------------------------------------


# enable use of multi-edges
cpa.composite.aggregateBasicBlocks = true

# ARGCPA is needed for counterexample analysis
cpa = cpa.arg.ARGCPA
ARGCPA.cpa = cpa.composite.CompositeCPA
CompositeCPA.cpas = cpa.location.LocationCPA, cpa.callstack.CallstackCPA, cpa.functionpointer.FunctionPointerCPA, cpa.value.ValueAnalysisCPA, cpa.testtargets.TestTargetCPA

analysis.summaryEdges = true

# BFS has shown to be a good traversal strategy for value analysis
# with and without CEGAR, so we use this by default.
# DFS with weighted-random traversal also works well, 
# while plain DFS seems to work not so well compared to others.
# Enables a weighted-random traversal order over the waitlist
# of abstract states. Abstract states
# deeper in the CFA get a weaker weighting, and abstract states
# high up in the CFA get a stronger weighting.
# You can use analysis.traversal.random.exponent to influence
# the strength of the weighting 
# (higher number => stronger weighting on states high up in the CFA).
# Default exponent = 8 to be a good fit for DFS and BFS.
[analysis.traversal]
order = bfs
useReversePostorder = false
useCallstack = false
weightedDepth = true

analysis.checkCounterexamples = false

analysis.useTestCaseGeneratorAlgorithm = true
analysis.algorithm = testcasegeneration.TestCaseGeneratorAlgorithm

# deactivate, led to assertion failures
counterexample.continueAfterInfeasibleError = false

# harness export cannot deal with aggregated blocks
cpa.composite.aggregateBasicBlocks = false

# Test output configuration
testcase.output.path = ./testcases
testcase.storageformat = JUNIT
testcase.junit.testClassName = GeneratedTest
testcase.junit.testMethodName = test

# Resource limits
limits.time.cpu = 180s
limits.memory = 1500M

# Performance optimizations
analysis.restartAfterUnknown = false
analysis.restartAfterTarget = false

