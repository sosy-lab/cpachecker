// SPDX-FileCopyrightText: The sqlite project
//
// SPDX-License-Identifier: blessing

/* Generated by CIL v. 1.3.7 */
/* print_CIL_Input is true */

#line 211 "/usr/lib/gcc/x86_64-linux-gnu/4.4.1/include/stddef.h"
typedef unsigned long size_t;
#line 141 "/usr/include/bits/types.h"
typedef long __off_t;
#line 142 "/usr/include/bits/types.h"
typedef long __off64_t;
#line 45 "/usr/include/stdio.h"
struct _IO_FILE;
#line 45
struct _IO_FILE;
#line 49 "/usr/include/stdio.h"
typedef struct _IO_FILE FILE;
#line 170 "/usr/include/libio.h"
struct _IO_FILE;
#line 180 "/usr/include/libio.h"
typedef void _IO_lock_t;
#line 186 "/usr/include/libio.h"
struct _IO_marker {
   struct _IO_marker *_next ;
   struct _IO_FILE *_sbuf ;
   int _pos ;
};
#line 271 "/usr/include/libio.h"
struct _IO_FILE {
   int _flags ;
   char *_IO_read_ptr ;
   char *_IO_read_end ;
   char *_IO_read_base ;
   char *_IO_write_base ;
   char *_IO_write_ptr ;
   char *_IO_write_end ;
   char *_IO_buf_base ;
   char *_IO_buf_end ;
   char *_IO_save_base ;
   char *_IO_backup_base ;
   char *_IO_save_end ;
   struct _IO_marker *_markers ;
   struct _IO_FILE *_chain ;
   int _fileno ;
   int _flags2 ;
   __off_t _old_offset ;
   unsigned short _cur_column ;
   signed char _vtable_offset ;
   char _shortbuf[1] ;
   _IO_lock_t *_lock ;
   __off64_t _offset ;
   void *__pad1 ;
   void *__pad2 ;
   void *__pad3 ;
   void *__pad4 ;
   size_t __pad5 ;
   int _mode ;
   char _unused2[(15UL * sizeof(int ) - 4UL * sizeof(void *)) - sizeof(size_t )] ;
};
#line 471 "/usr/include/stdlib.h"
extern  __attribute__((__nothrow__)) void *malloc(size_t __size )  __attribute__((__malloc__)) ;
#line 485
extern  __attribute__((__nothrow__)) void *realloc(void *__ptr , size_t __size )  __attribute__((__warn_unused_result__)) ;
#line 488
extern  __attribute__((__nothrow__)) void free(void *__ptr ) ;
#line 145 "/usr/include/stdio.h"
extern struct _IO_FILE *stdin ;
#line 146
extern struct _IO_FILE *stdout ;
#line 147
extern struct _IO_FILE *stderr ;
#line 214
extern int fclose(FILE *__stream ) ;
#line 219
extern int fflush(FILE *__stream ) ;
#line 333
extern int fprintf(FILE * __restrict  __stream , char const   * __restrict  __format 
                   , ...) ;
#line 339
extern int printf(char const   * __restrict  __format  , ...) ;
#line 604
extern char *fgets(char * __restrict  __s , int __n , FILE * __restrict  __stream ) ;
#line 42 "shell-simple.c"
char *local_getline(char *zPrompt , FILE *in ) 
{ char *zLine ;
  int nLine ;
  int n ;
  int eol ;
  void *tmp ;
  void *tmp___0 ;
  char *tmp___1 ;
  void *tmp___2 ;
  char const   * __restrict  __cil_tmp11 ;
  unsigned long __cil_tmp12 ;
  int __cil_tmp13 ;
  int __cil_tmp14 ;
  void *__cil_tmp15 ;
  unsigned long __cil_tmp16 ;
  char *__cil_tmp17 ;
  unsigned long __cil_tmp18 ;
  unsigned long __cil_tmp19 ;
  char *__cil_tmp20 ;
  char * __restrict  __cil_tmp21 ;
  int __cil_tmp22 ;
  FILE * __restrict  __cil_tmp23 ;
  char *__cil_tmp24 ;
  unsigned long __cil_tmp25 ;
  unsigned long __cil_tmp26 ;
  void *__cil_tmp27 ;
  char *__cil_tmp28 ;
  char *__cil_tmp29 ;
  int __cil_tmp30 ;
  char *__cil_tmp31 ;
  char __cil_tmp32 ;
  int __cil_tmp33 ;
  char *__cil_tmp34 ;
  void *__cil_tmp35 ;
  int __cil_tmp36 ;
  unsigned long __cil_tmp37 ;

  {
#line 48
  if (zPrompt) {
#line 48
    if (*zPrompt) {
      {
#line 49
      __cil_tmp11 = (char const   * __restrict  )"%s";
#line 49
      printf(__cil_tmp11, zPrompt);
#line 50
      fflush(stdout);
      }
    } else {

    }
  } else {

  }
  {
#line 52
  nLine = 100;
#line 53
  __cil_tmp12 = (unsigned long )nLine;
#line 53
  tmp = malloc(__cil_tmp12);
#line 53
  zLine = (char *)tmp;
#line 54
  n = 0;
#line 55
  eol = 0;
  }
  {
#line 56
  while (1) {
    while_0_continue: /* CIL Label */ ;
#line 56
    if (! eol) {

    } else {
      goto while_0_break;
    }
    {
#line 57
    __cil_tmp13 = n + 100;
#line 57
    if (__cil_tmp13 > nLine) {
      {
#line 58
      __cil_tmp14 = nLine * 2;
#line 58
      nLine = __cil_tmp14 + 100;
#line 59
      __cil_tmp15 = (void *)zLine;
#line 59
      __cil_tmp16 = (unsigned long )nLine;
#line 59
      tmp___0 = realloc(__cil_tmp15, __cil_tmp16);
#line 59
      zLine = (char *)tmp___0;
      }
      {
#line 60
      __cil_tmp17 = (char *)0;
#line 60
      __cil_tmp18 = (unsigned long )__cil_tmp17;
#line 60
      __cil_tmp19 = (unsigned long )zLine;
#line 60
      if (__cil_tmp19 == __cil_tmp18) {
#line 60
        return ((char *)0);
      } else {

      }
      }
    } else {

    }
    }
    {
#line 62
    __cil_tmp20 = zLine + n;
#line 62
    __cil_tmp21 = (char * __restrict  )__cil_tmp20;
#line 62
    __cil_tmp22 = nLine - n;
#line 62
    __cil_tmp23 = (FILE * __restrict  )in;
#line 62
    tmp___1 = fgets(__cil_tmp21, __cil_tmp22, __cil_tmp23);
    }
    {
#line 62
    __cil_tmp24 = (char *)0;
#line 62
    __cil_tmp25 = (unsigned long )__cil_tmp24;
#line 62
    __cil_tmp26 = (unsigned long )tmp___1;
#line 62
    if (__cil_tmp26 == __cil_tmp25) {
#line 63
      if (n == 0) {
        {
#line 64
        __cil_tmp27 = (void *)zLine;
#line 64
        free(__cil_tmp27);
        }
#line 65
        return ((char *)0);
      } else {

      }
#line 67
      __cil_tmp28 = zLine + n;
#line 67
      *__cil_tmp28 = (char)0;
#line 68
      eol = 1;
      goto while_0_break;
    } else {

    }
    }
    {
#line 71
    while (1) {
      while_1_continue: /* CIL Label */ ;
      {
#line 71
      __cil_tmp29 = zLine + n;
#line 71
      if (*__cil_tmp29) {

      } else {
        goto while_1_break;
      }
      }
#line 71
      n = n + 1;
    }
    while_1_break: /* CIL Label */ ;
    }
#line 72
    if (n > 0) {
      {
#line 72
      __cil_tmp30 = n - 1;
#line 72
      __cil_tmp31 = zLine + __cil_tmp30;
#line 72
      __cil_tmp32 = *__cil_tmp31;
#line 72
      __cil_tmp33 = (int )__cil_tmp32;
#line 72
      if (__cil_tmp33 == 10) {
#line 73
        n = n - 1;
#line 74
        __cil_tmp34 = zLine + n;
#line 74
        *__cil_tmp34 = (char)0;
#line 75
        eol = 1;
      } else {

      }
      }
    } else {

    }
  }
  while_0_break: /* CIL Label */ ;
  }
  {
#line 78
  __cil_tmp35 = (void *)zLine;
#line 78
  __cil_tmp36 = n + 1;
#line 78
  __cil_tmp37 = (unsigned long )__cil_tmp36;
#line 78
  tmp___2 = realloc(__cil_tmp35, __cil_tmp37);
#line 78
  zLine = (char *)tmp___2;
  }
#line 79
  return (zLine);
}
}
#line 83 "shell-simple.c"
int do_meta_command(void) 
{ int i ;
  int nArg ;
  FILE *in ;
  int rc ;
  char *zLine ;
  int nSep ;
  int lineno ;
  int nCol ;
  char *z ;
  char *__cil_tmp13 ;
  char *__cil_tmp14 ;
  unsigned long __cil_tmp15 ;
  unsigned long __cil_tmp16 ;
  char __cil_tmp17 ;
  int __cil_tmp18 ;
  char __cil_tmp19 ;
  int __cil_tmp20 ;
  int __cil_tmp21 ;
  int __cil_tmp22 ;
  FILE * __restrict  __cil_tmp23 ;
  char const   * __restrict  __cil_tmp24 ;
  int __cil_tmp25 ;
  void *__cil_tmp26 ;

  {
#line 84
  i = 1;
#line 85
  nArg = 0;
#line 86
  in = stdin;
#line 88
  rc = 0;
#line 90
  nSep = 40;
#line 91
  lineno = 0;
#line 93
  nCol = 100;
  {
#line 97
  while (1) {
    while_2_continue: /* CIL Label */ ;
    {
#line 97
    __cil_tmp13 = (char *)0;
#line 97
    zLine = local_getline(__cil_tmp13, in);
    }
    {
#line 97
    __cil_tmp14 = (char *)0;
#line 97
    __cil_tmp15 = (unsigned long )__cil_tmp14;
#line 97
    __cil_tmp16 = (unsigned long )zLine;
#line 97
    if (__cil_tmp16 != __cil_tmp15) {

    } else {
      goto while_2_break;
    }
    }
#line 99
    i = 0;
#line 100
    lineno = lineno + 1;
#line 101
    i = 0;
#line 101
    z = zLine;
    {
#line 101
    while (1) {
      while_3_continue: /* CIL Label */ ;
#line 101
      if (*z) {
        {
#line 101
        __cil_tmp17 = *z;
#line 101
        __cil_tmp18 = (int )__cil_tmp17;
#line 101
        if (__cil_tmp18 != 10) {
          {
#line 101
          __cil_tmp19 = *z;
#line 101
          __cil_tmp20 = (int )__cil_tmp19;
#line 101
          if (__cil_tmp20 != 13) {

          } else {
            goto while_3_break;
          }
          }
        } else {
          goto while_3_break;
        }
        }
      } else {
        goto while_3_break;
      }
#line 103
      *z = (char)0;
#line 104
      i = i + 1;
#line 105
      if (i < nCol) {
#line 106
        __cil_tmp21 = nSep - 1;
#line 106
        z = z + __cil_tmp21;
      } else {

      }
#line 101
      z = z + 1;
    }
    while_3_break: /* CIL Label */ ;
    }
#line 110
    *z = (char)0;
    {
#line 111
    __cil_tmp22 = i + 1;
#line 111
    if (__cil_tmp22 != nCol) {
      {
#line 112
      __cil_tmp23 = (FILE * __restrict  )stderr;
#line 112
      __cil_tmp24 = (char const   * __restrict  )"line %d: expected %d columns of data but found %d\n";
#line 112
      __cil_tmp25 = i + 1;
#line 112
      fprintf(__cil_tmp23, __cil_tmp24, lineno, nCol, __cil_tmp25);
      }
      goto while_2_break;
    } else {

    }
    }
    {
#line 115
    __cil_tmp26 = (void *)zLine;
#line 115
    free(__cil_tmp26);
    }
  }
  while_2_break: /* CIL Label */ ;
  }
  {
#line 117
  fclose(in);
  }
#line 118
  return (0);
}
}
