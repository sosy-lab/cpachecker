/* Generated by CIL v. 1.3.7 */
/* print_CIL_Input is true */

#line 71 "/usr/include/assert.h"
extern  __attribute__((__nothrow__, __noreturn__)) void __assert_fail(char const   *__assertion ,
                                                                      char const   *__file ,
                                                                      unsigned int __line ,
                                                                      char const   *__function ) ;
int cs1  =    0;
int cs2  =    0;
int lock  =    0;
/* Thread 0 */
void thread0(void)
{

  {
    {

      while (1) {
      while_0_continue: /* CIL Label */ ;
        {
          while (1) {
          while_1_continue: /* CIL Label */ ;
	  _START_ATOMIC_;
            if (lock != 0) {
	      _END_ATOMIC_;
            } else {
              goto while_1_break;
            }
          }

        while_1_break: /* CIL Label */ ;
        }
        lock = 1;
        _END_ATOMIC_;
        cs1 = 1;
        if (cs2 == 0) {

        } else {
          {
            __assert_fail("cs2 == 0", "mutex-safe-thr0.c", 13U, "main");
          }
        }
        cs1 = 0;
        lock = 0;
      }
    while_0_break: /* CIL Label */ ;
    }
  }
}

/* Thread 1 */
void thread1(void)
{

  {
    {
      while (1) {
      while_0_continue: /* CIL Label */ ;
        {
          while (1) {
          while_1_continue: /* CIL Label */ ;
	    _START_ATOMIC_;
            if (lock != 0) {
	      _END_ATOMIC_;
            } else {
              goto while_1_break;
            }
          }
        while_1_break: /* CIL Label */ ;
        }
        lock = 2;
        _END_ATOMIC_;
        cs2 = 1;
        if (cs1 == 0) {

        } else {
          {
            __assert_fail("cs1 == 0", "mutex-safe-thr1.c", 13U, "main");
          }
        }
        cs2 = 0;
        lock = 0;
      }
    while_0_break: /* CIL Label */ ;
    }
  }
}

